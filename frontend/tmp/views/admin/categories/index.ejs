<%- include('../admin_components/header') %> 
<body>
  <%- include('../admin_components/navbar') %> 

  <div class="container">
    <h2>Categorias</h2>
    <a href="/admin/categories/new" class="btn btn-success">Criar nova categoria</a>
    <hr>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Título</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        <% category.forEach(item => { %>
          <tr>
            <td><%=item.id %></td>
            <td><%=item.title %></td>
            <td>
              <form action="/admin/categories/edit/<%=item.id%>" method="get" style="display: inline;">
                <button class="btn btn-warning">Editar</button>
              </form>
              <form action="/admin/categories/delete" method="post"  style="display: inline;" onsubmit="utilities.confirmDeletion(event, this)" >
                <input type="hidden" name="id" value="<%=item.id%>">
                <button class="btn btn-danger">Deletar</button>
              </form>
            </td>
          </tr>
        <% }) %> 
        
        
        
      </tbody>
    </table>
  </div>
</body>
<%- include('../admin_components/footer') %> 
<script>
  function confirmarDelecao(event, form){
    event.preventDefault();
    const decision = confirm('Confirmar exclusão?');
    if (decision) form.submit();
  }
</script>


<!--  -->